// ─────────────────────────────────────────────────
//  Botovis Widget — Internationalization
// ─────────────────────────────────────────────────

export type Locale = 'tr' | 'en';

const translations: Record<Locale, Record<string, string>> = {
  tr: {
    title: 'Botovis Asistan',
    placeholder: 'Bir şey sorun...',
    send: 'Gönder',
    thinking: 'Düşünüyorum...',
    confirm: 'Onayla',
    reject: 'İptal',
    confirmQuestion: 'Bu işlemi onaylıyor musunuz?',
    actionDetected: 'Aksiyon Tespit Edildi',
    table: 'Tablo',
    operation: 'İşlem',
    data: 'Veri',
    condition: 'Koşul',
    columns: 'Sütunlar',
    confidence: 'Güven',
    noResults: 'Sonuç bulunamadı',
    resultsFound: '{count} sonuç bulundu',
    showingFirst: 'ilk {count} gösteriliyor',
    operationCancelled: 'İşlem iptal edildi',
    operationSuccess: 'İşlem başarılı',
    operationFailed: 'İşlem başarısız',
    error: 'Bir hata oluştu',
    reset: 'Sıfırla',
    resetDone: 'Konuşma sıfırlandı',
    close: 'Kapat',
    emptyState: 'Merhaba! Size nasıl yardımcı olabilirim?',
    suggestedActions: 'Önerilen işlemler',
    listAll: '{table} listele',
    addNew: 'Yeni {table} ekle',
    autoStep: 'Otomatik adım',
    connectionError: 'Bağlantı hatası, tekrar deneyin',
    sessionExpired: 'Oturum süresi dolmuş, sayfayı yenileyin',
    tooManyRequests: 'Çok fazla istek, lütfen bekleyin',
    shortcutToggle: 'Aç/kapat',
    shortcutSend: 'Gönder',
    shortcutNewline: 'Yeni satır',
    shortcutClose: 'Kapat',
    comingSoon: 'Yakında',
    // Conversation history
    conversations: 'Sohbetler',
    newConversation: 'Yeni Sohbet',
    backToChat: 'Sohbete Dön',
    noConversations: 'Henüz sohbet yok',
    loadingConversations: 'Yükleniyor...',
    deleteConversation: 'Sohbeti sil',
    conversationDeleted: 'Sohbet silindi',
    you: 'Sen',
    assistant: 'Botovis',
    themeLight: 'Açık Tema',
    themeDark: 'Koyu Tema',
    toolsUsed: '{count} araç',
    steps: '{count} adım',
    running: 'Çalıştırılıyor',
    details: 'Detaylar',
    hideDetails: 'Gizle',
    confirmed: 'Onaylandı',
    rejected: 'Reddedildi',
    processing: 'İşleniyor...',
    confirmAction_create: 'Yeni kayıt ekleme',
    confirmAction_update: 'Kayıt güncelleme',
    confirmAction_delete: 'Kayıt silme',
    confirmAction_default: 'Veritabanı işlemi',
    fieldName: 'Alan',
    fieldValue: 'Değer',
    messageCount: '{count} mesaj',
    yesterday: 'Dün',
  },
  en: {
    title: 'Botovis Assistant',
    placeholder: 'Ask something...',
    send: 'Send',
    thinking: 'Thinking...',
    confirm: 'Confirm',
    reject: 'Cancel',
    confirmQuestion: 'Do you confirm this operation?',
    actionDetected: 'Action Detected',
    table: 'Table',
    operation: 'Operation',
    data: 'Data',
    condition: 'Condition',
    columns: 'Columns',
    confidence: 'Confidence',
    noResults: 'No results found',
    resultsFound: '{count} results found',
    showingFirst: 'showing first {count}',
    operationCancelled: 'Operation cancelled',
    operationSuccess: 'Operation successful',
    operationFailed: 'Operation failed',
    error: 'An error occurred',
    reset: 'Reset',
    resetDone: 'Conversation reset',
    close: 'Close',
    emptyState: 'Hello! How can I help you?',
    suggestedActions: 'Suggested actions',
    listAll: 'List {table}',
    addNew: 'Add new {table}',
    autoStep: 'Auto step',
    connectionError: 'Connection error, please retry',
    sessionExpired: 'Session expired, please refresh the page',
    tooManyRequests: 'Too many requests, please wait',
    shortcutToggle: 'Toggle',
    shortcutSend: 'Send',
    shortcutNewline: 'New line',
    shortcutClose: 'Close',
    comingSoon: 'Coming soon',
    // Conversation history
    conversations: 'Conversations',
    newConversation: 'New Chat',
    backToChat: 'Back to Chat',
    noConversations: 'No conversations yet',
    loadingConversations: 'Loading...',
    deleteConversation: 'Delete conversation',
    conversationDeleted: 'Conversation deleted',
    you: 'You',
    assistant: 'Botovis',
    themeLight: 'Light Theme',
    themeDark: 'Dark Theme',
    toolsUsed: '{count} tools',
    steps: '{count} steps',
    running: 'Running',
    details: 'Details',
    hideDetails: 'Hide',
    confirmed: 'Confirmed',
    rejected: 'Rejected',
    processing: 'Processing...',
    confirmAction_create: 'Create new record',
    confirmAction_update: 'Update record',
    confirmAction_delete: 'Delete record',
    confirmAction_default: 'Database operation',
    fieldName: 'Field',
    fieldValue: 'Value',
    messageCount: '{count} messages',
    yesterday: 'Yesterday',
  },
};

export function t(key: string, locale: Locale = 'en', params?: Record<string, string | number>): string {
  let text = translations[locale]?.[key] ?? translations.en[key] ?? key;
  if (params) {
    for (const [k, v] of Object.entries(params)) {
      text = text.replace(`{${k}}`, String(v));
    }
  }
  return text;
}
